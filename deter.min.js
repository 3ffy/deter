/* deter - version: 2.1 - author: 3ffy (Aur√©lien Gy) - aureliengy@gmail.com - http://www.aureliengy.com - licence: BSD 3-Clause Licence (@see licence file or https://raw.githubusercontent.com/3ffy/deter/master/LICENSE). Note that the plugins "JQuery.Identicon5" by Francis Shanahan (http://archive.plugins.jquery.com/project/identicon5) and "JQuery.MD5" by Gabriele Romanato (http://blog.gabrieleromanato.com) are separated project and get their own licence. */
!function(e){e.md5=function(e){function t(e,t){return e<<t|e>>>32-t}function r(e,t){var r,a,n,s,o
return n=2147483648&e,s=2147483648&t,r=1073741824&e,a=1073741824&t,o=(1073741823&e)+(1073741823&t),r&a?2147483648^o^n^s:r|a?1073741824&o?3221225472^o^n^s:1073741824^o^n^s:o^n^s}function a(e,t,r){return e&t|~e&r}function n(e,t,r){return e&r|t&~r}function s(e,t,r){return e^t^r}function o(e,t,r){return t^(e|~r)}function i(e,n,s,o,i,c,u){return e=r(e,r(r(a(n,s,o),i),u)),r(t(e,c),n)}function c(e,a,s,o,i,c,u){return e=r(e,r(r(n(a,s,o),i),u)),r(t(e,c),a)}function u(e,a,n,o,i,c,u){return e=r(e,r(r(s(a,n,o),i),u)),r(t(e,c),a)}function f(e,a,n,s,i,c,u){return e=r(e,r(r(o(a,n,s),i),u)),r(t(e,c),a)}function b(e){for(var t,r=e.length,a=r+8,n=(a-a%64)/64,s=16*(n+1),o=Array(s-1),i=0,c=0;r>c;)t=(c-c%4)/4,i=c%4*8,o[t]=o[t]|e.charCodeAt(c)<<i,c++
return t=(c-c%4)/4,i=c%4*8,o[t]=o[t]|128<<i,o[s-2]=r<<3,o[s-1]=r>>>29,o}function g(e){var t,r,a="",n=""
for(r=0;3>=r;r++)t=e>>>8*r&255,n="0"+t.toString(16),a+=n.substr(n.length-2,2)
return a}function h(e){e=e.replace(/\r\n/g,"\n")
for(var t="",r=0;r<e.length;r++){var a=e.charCodeAt(r)
128>a?t+=String.fromCharCode(a):a>127&&2048>a?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t}var l,v,d,p,k,m,C,w,R,I=[],x=7,y=12,S=17,z=22,T=5,D=9,M=14,j=20,A=4,P=11,Q=16,q=23,E=6,$=10,L=15,B=21
for(e=h(e),I=b(e),m=1732584193,C=4023233417,w=2562383102,R=271733878,l=0;l<I.length;l+=16)v=m,d=C,p=w,k=R,m=i(m,C,w,R,I[l+0],x,3614090360),R=i(R,m,C,w,I[l+1],y,3905402710),w=i(w,R,m,C,I[l+2],S,606105819),C=i(C,w,R,m,I[l+3],z,3250441966),m=i(m,C,w,R,I[l+4],x,4118548399),R=i(R,m,C,w,I[l+5],y,1200080426),w=i(w,R,m,C,I[l+6],S,2821735955),C=i(C,w,R,m,I[l+7],z,4249261313),m=i(m,C,w,R,I[l+8],x,1770035416),R=i(R,m,C,w,I[l+9],y,2336552879),w=i(w,R,m,C,I[l+10],S,4294925233),C=i(C,w,R,m,I[l+11],z,2304563134),m=i(m,C,w,R,I[l+12],x,1804603682),R=i(R,m,C,w,I[l+13],y,4254626195),w=i(w,R,m,C,I[l+14],S,2792965006),C=i(C,w,R,m,I[l+15],z,1236535329),m=c(m,C,w,R,I[l+1],T,4129170786),R=c(R,m,C,w,I[l+6],D,3225465664),w=c(w,R,m,C,I[l+11],M,643717713),C=c(C,w,R,m,I[l+0],j,3921069994),m=c(m,C,w,R,I[l+5],T,3593408605),R=c(R,m,C,w,I[l+10],D,38016083),w=c(w,R,m,C,I[l+15],M,3634488961),C=c(C,w,R,m,I[l+4],j,3889429448),m=c(m,C,w,R,I[l+9],T,568446438),R=c(R,m,C,w,I[l+14],D,3275163606),w=c(w,R,m,C,I[l+3],M,4107603335),C=c(C,w,R,m,I[l+8],j,1163531501),m=c(m,C,w,R,I[l+13],T,2850285829),R=c(R,m,C,w,I[l+2],D,4243563512),w=c(w,R,m,C,I[l+7],M,1735328473),C=c(C,w,R,m,I[l+12],j,2368359562),m=u(m,C,w,R,I[l+5],A,4294588738),R=u(R,m,C,w,I[l+8],P,2272392833),w=u(w,R,m,C,I[l+11],Q,1839030562),C=u(C,w,R,m,I[l+14],q,4259657740),m=u(m,C,w,R,I[l+1],A,2763975236),R=u(R,m,C,w,I[l+4],P,1272893353),w=u(w,R,m,C,I[l+7],Q,4139469664),C=u(C,w,R,m,I[l+10],q,3200236656),m=u(m,C,w,R,I[l+13],A,681279174),R=u(R,m,C,w,I[l+0],P,3936430074),w=u(w,R,m,C,I[l+3],Q,3572445317),C=u(C,w,R,m,I[l+6],q,76029189),m=u(m,C,w,R,I[l+9],A,3654602809),R=u(R,m,C,w,I[l+12],P,3873151461),w=u(w,R,m,C,I[l+15],Q,530742520),C=u(C,w,R,m,I[l+2],q,3299628645),m=f(m,C,w,R,I[l+0],E,4096336452),R=f(R,m,C,w,I[l+7],$,1126891415),w=f(w,R,m,C,I[l+14],L,2878612391),C=f(C,w,R,m,I[l+5],B,4237533241),m=f(m,C,w,R,I[l+12],E,1700485571),R=f(R,m,C,w,I[l+3],$,2399980690),w=f(w,R,m,C,I[l+10],L,4293915773),C=f(C,w,R,m,I[l+1],B,2240044497),m=f(m,C,w,R,I[l+8],E,1873313359),R=f(R,m,C,w,I[l+15],$,4264355552),w=f(w,R,m,C,I[l+6],L,2734768916),C=f(C,w,R,m,I[l+13],B,1309151649),m=f(m,C,w,R,I[l+4],E,4149444226),R=f(R,m,C,w,I[l+11],$,3174756917),w=f(w,R,m,C,I[l+2],L,718787259),C=f(C,w,R,m,I[l+9],B,3951481745),m=r(m,v),C=r(C,d),w=r(w,p),R=r(R,k)
var F=g(m)+g(C)+g(w)+g(R)
return F.toLowerCase()},e.fn.identicon5=function(t){settings=jQuery.extend({rotate:!0,size:32},t)
var r=function(e,t){if(t.length>=2){e.beginPath(),e.moveTo(t[0],t[1])
for(var r=2;r<t.length;r++)e.lineTo(t[r],t[r+1]),r++
e.fill()}},a=function(e,t){switch(e){case 0:e=[.5,1,1,0,1,1]
break
case 1:e=[.5,0,1,0,.5,1,0,1]
break
case 2:e=[.5,0,1,0,1,1,.5,1,1,.5]
break
case 3:e=[0,.5,.5,0,1,.5,.5,1,.5,.5]
break
case 4:e=[0,.5,1,0,1,1,0,1,1,.5]
break
case 5:e=[1,0,1,1,.5,1,1,.5,.5,.5]
break
case 6:e=[0,0,1,0,1,.5,0,0,.5,1,0,1]
break
case 7:e=[0,0,.5,0,1,.5,.5,1,0,1,.5,.5]
break
case 8:e=[.5,0,.5,.5,1,.5,1,1,.5,1,.5,.5,0,.5]
break
case 9:e=[0,0,1,0,.5,.5,1,.5,.5,1,.5,.5,0,1]
break
case 10:e=[0,.5,.5,1,1,.5,.5,0,1,0,1,1,0,1]
break
case 11:e=[.5,0,1,0,1,1,.5,1,1,.75,.5,.5,1,.25]
break
case 12:e=[0,.5,.5,0,.5,.5,1,0,1,.5,.5,1,.5,.5,0,1]
break
case 13:e=[0,0,1,0,1,1,0,1,1,.5,.5,.25,.5,.75,0,.5,.5,.25]
break
case 14:e=[0,.5,.5,.5,.5,0,1,0,.5,.5,1,.5,.5,1,.5,.5,0,1]
break
default:e=[0,0,1,0,.5,.5,.5,0,0,.5,1,.5,.5,1,.5,.5,0,1]}for(var r=0;r<e.length;r++)e[r]=e[r]*t
return e},n=function(e,t){var n,s=t/5,o=s/2,i=0,c=0
e.strokeRect(0,0,s,s)
for(var u=0;15>u;u++){n=a(u,s),e.save(),e.translate(o+i*s,o+c*s)
for(var f=0;f<n.length;f++)n[f]-=o
r(e,n),e.strokeRect(-o,-o,s,s),e.restore(),i>=4?(i=0,c++):i++}},s=function(e,t,a,n,s,o,i){var c=i/2
e.save(),e.translate(a,n),e.rotate(o*Math.PI/180),e.save(),e.translate(c,c)
for(var u=[],f=0;f<t.length;f++)u[f]=t[f]-c
e.rotate(s),r(e,u),e.restore(),e.restore()},o=function(e,t){switch(e){case 0:e=[]
break
case 1:e=[0,0,1,0,1,1,0,1]
break
case 2:e=[.5,0,1,.5,.5,1,0,.5]
break
case 3:e=[0,0,1,0,1,1,0,1,0,.5,.5,1,1,.5,.5,0,0,.5]
break
case 4:e=[.25,0,.75,0,.5,.5,1,.25,1,.75,.5,.5,.75,1,.25,1,.5,.5,0,.75,0,.25,.5,.5]
break
case 5:e=[0,0,.5,.25,1,0,.75,.5,1,1,.5,.75,0,1,.25,.5]
break
case 6:e=[.33,.33,.67,.33,.67,.67,.33,.67]
break
case 7:e=[0,0,.33,0,.33,.33,.66,.33,.67,0,1,0,1,.33,.67,.33,.67,.67,1,.67,1,1,.67,1,.67,.67,.33,.67,.33,1,0,1,0,.67,.33,.67,.33,.33,0,.33]
break
default:e=[0,0,1,0,.5,.5,.5,0,0,.5,1,.5,.5,1,.5,.5,0,1]}for(var r=0;r<e.length;r++)e[r]=e[r]*t
return e},i=function(e,t,r,n){var i=parseInt(t.substr(0,1),16),c=parseInt(t.substr(1,1),16),u=7&parseInt(t.substr(2,1),16),f=Math.PI/2,b=f*(3&parseInt(t.substr(3,1),16)),g=f*(3&parseInt(t.substr(4,1),16)),h=parseInt(t.substr(5,1),16)%2,l=parseInt(t.substr(6,2),16),v=parseInt(t.substr(8,2),16),d=parseInt(t.substr(10,2),16),p=parseInt(t.substr(12,2),16),k=parseInt(t.substr(14,2),16),m=parseInt(t.substr(16,2),16),C=r/3,w=r,R=a(i,C)
e.fillStyle="rgb("+l+","+v+","+d+")",n===!1&&(b=0),s(e,R,0,0,b,0,C),s(e,R,w,0,b,90,C),s(e,R,w,w,b,180,C),s(e,R,0,w,b,270,C),n===!1&&(g=0)
var I=a(c,C)
e.fillStyle="rgb("+p+","+k+","+m+")",s(e,I,0,C,g,0,C),s(e,I,2*C,0,g,90,C),s(e,I,3*C,2*C,g,180,C),s(e,I,C,3*C,g,270,C)
var x=o(u,C)
e.fillStyle=h>0&&(Math.abs(l-p)>127||Math.abs(v-k)>127||Math.abs(d-m)>127)?"rgb("+p+","+k+","+m+")":"rgb("+l+","+v+","+d+")",s(e,x,C,C,0,0,C)}
return this.each(function(){var t=e(this).html(),r=document.createElement("canvas")
if(r.getContext){r.width=settings.size,r.height=settings.size
var a=r.getContext("2d")
"test"===t?n(a,settings.size):i(a,t,settings.size,settings.rotate),e(this).html(""),e(this).append(r)}})}
var t=function(t,r){var a={}
a.md5=e.md5(t),a.hexRaw=a.md5.substr(0,6),a.hex="#"+a.hexRaw,a.rgbRaw=e.hexToRgb(a.hexRaw,!0),a.rgb="rgb("+a.rgbRaw.r+", "+a.rgbRaw.g+", "+a.rgbRaw.b+")"
var n="number"==typeof r?r:1
return a.rgbaRaw=a.rgbRaw,a.rgbaRaw.a=n,a.rgba="rgba("+a.rgbaRaw.r+", "+a.rgbaRaw.g+", "+a.rgbaRaw.b+", "+a.rgbaRaw.a+")",a}
e.extend({hexToRgb:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i
e=e.replace(t,function(e,t,r,a){return t+t+r+r+a+a})
var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e)
return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null},strToColor:function(e,r,a){var n
if(a!==!0)n=t(e,r)
else{n=[]
var s,o,i=e.length
for(s=0;i>s;s++)o=e.substr(0,s+1),n.push(t(o,r))}return n}}),e.fn.deter=function(t,r,a){var n=jQuery.extend({sequence:!1,opacity:1,events:"keyup",selectorDelegated:null,selectorDescendant:null},r)
return this.each(function(){var r=null===n.selectorDelegated?this:n.selectorDelegated
e(r).on(n.events,n.selectorDescendant,function(){var r="function"==typeof a?a.call(this):e(this).val(),s=e.strToColor(r,n.opacity,n.sequence)
t.call(this,s,r)})}),this},e.fn.identicon=function(t,r,a){var n=document.createElement("canvas"),s=n.getContext?!0:!1
return s?this.each(function(){var r=e(this)
"string"==typeof t?r.text(t).identicon5(a):r.text("")}):(settings=e.extend({size:65},a),this.each(function(){var a=e(this)
if("string"==typeof t){var n=a.html('<span class="deter-canevas"></span>')
n.css("width",settings.size).css("height",settings.size).css("background-color",r)}else a.html("")})),this}}(jQuery)